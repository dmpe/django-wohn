{% extends 'base.html' %}

{% block title %}B40.cz - Register to add new listings{% endblock %}

{% block descip %}Register a new account for adding new real estate listings - B40.cz{% endblock %}

{% block robots %}index, follow{% endblock %}

{% load crispy_forms_tags %}

{% block content %}
<div class="container-fluid">

	<!-- Because of Recaptcha login -->
	<script src='https://www.google.com/recaptcha/api.js?render=6LeZy3MUAAAAALMLtwqi7aTHvXnvdY6sx5ALYVp5'></script>

	<script type="text/javascript">
	// execute function and output the token into the browser console
	grecaptcha.ready(function() {
		grecaptcha.execute('6LeZy3MUAAAAALMLtwqi7aTHvXnvdY6sx5ALYVp5', {action: 'register'}).then(function(token) {
			console.log(token);
			$("#recaptchaValidator").val(token);
		});
	});
	</script>

	<script>
	// used for automatically binding the challenge to a button/form
	function onSubmit(token) {
		document.getElementById("form-register").submit();
	}
    </script>

	<!-- Because of Facebook login -->
	<div id="fb-root"></div>

	<!-- TODO what if user wants to logout or deasscoiate accounts: is registeration page available to him -->
    <div class="row d-flex justify-content-center login_register_box">
    	<div class="card text-center bg-light border-dark col-md-5 col-lg-3 mr-1">

    		<!-- Google Brand Guidelines on Azure/ in CSS: https://developers.google.com/identity/branding-guidelines -->
			<div class="m-3">
				<a type="button" class="btn btn-primary google_signin" href="{% url 'social:begin' 'google-oauth2' %}">
					<img class="google_icon" src="https://djangowohnreal1.blob.core.windows.net/images/btn_google_dark_normal_ios.svg">
					<p class="text-center mt-1 text-white">Sign Up With Google</p>
				</a>
			</div>

			<!-- Twitter Brand Guidelines on Azure/ in CSS -->
			<div class="m-3">
				<a type="button" class="btn btn-info twitter_singin" href="{% url 'social:begin' 'twitter' %}">
					<img class="twitter_icon" src="https://djangowohnreal1.blob.core.windows.net/images/Twitter_Logo_Blue.svg">
					<p class="text-center mt-1 text-white">Sign Up With Twitter</p>
				</a>
			</div>
			
			<!-- https://developers.facebook.com/docs/facebook-login/web/login-button -->
			<div class="m-3">
				<a type="button" class="btn btn-white facebook_singin" data-onsuccess="onSignIn" href="{% url 'social:begin' 'facebook' %}">
					<img class="facebook_icon" src="https://djangowohnreal1.blob.core.windows.net/images/flogo-HexRBG-Wht-58.svg">
					<p class="text-center mt-1 text-white">Sign Up With Facebook</p>
				</a>
			</div>

       	</div>
    	
    	<!-- show on display size between xs and sm -->
    	<div class="horizontalLine d-block d-xs-block d-sm-none pt-1 pb-1 my-5">
    		<h3 class="circle rounded-circle border border-warning m-0 text-center">OR</h3>
    	</div>

    	<!-- show on display size between md and xl -->
    	<div class="verticalLine d-none d-md-block d-xl-block mx-5">
    		<h3 class="circle rounded-circle border border-warning m-0 text-center">OR</h3>
    	</div>

    	<div class="card bg-light border-dark col-md-5 col-lg-4">
			<div class="card-header text-center">
				<h1 class="card-title">Register</h1>
			</div>
			<div class="card-body">
				<form id = "form-register" method="POST">
					{% csrf_token %}
					<div class="form-group spacing">
						<div class="input-group">
							<input class="form-control" type="email" id="inputEmail" name="inputEmail" placeholder="Email">
							<label class="sr-only" for="inputEmail">Email</label>
						</div>
					</div>
					<div class="form-group spacing">
						<div class="input-group">
							<input type="text" id="inputUsername" name="inputUsername" class="form-control" placeholder="Username">
							<label class="sr-only" for="inputUsername">Username</label>
						</div>
					</div>
					<div class="form-group spacing">
						<div class="input-group">
							<!-- when header already contains `buttonEYE` then here one needs a different id attr. -->
							<input class="form-control" type="password" id="inputNewPassword" name ="inputNewPassword" placeholder="New Password">
							<div class="input-group-append">
								<span class="input-group-text" id="inputGroupAppend">
									<button href="" id="buttonEYE2" aria-hidden="true" type="button">
										<i class="fas fa-eye fa-lg resetIconStylesEYE"></i>
									</button>
								</span>
							</div>
							<label class="sr-only" for="inputNewPassword">New Password</label>
						</div>
					</div>
					<div class="form-group spacing">
						<div class="input-group">
							<!-- when header already contains `buttonEYE` then here one needs a different id attr. -->
							<input class="form-control" type="password" id="inputConfirmNewPassword" name="inputConfirmNewPassword" placeholder="Confirm New Password">
							<div class="input-group-append">
								<span class="input-group-text" id="inputGroupAppend">
									<button href = "" id="buttonEYE3" aria-hidden="true" type="button">
										<i class="fas fa-eye fa-lg resetIconStylesEYE"></i>
									</button>
								</span>
							</div>
							<label class="sr-only" for="inputConfirmNewPassword">Confirm New Password</label>
						</div>
					</div>

					<p class="float-left">
						<a href="{% url 'reset_password' %}">Forgot your username or password?</a>
					</p>

					<!-- Also includes Google Recaptcha v3 -->
					<button type="submit" class="btn btn-warning float-right btn-lg g-recaptcha" id="recaptchaValidator" data-sitekey="6LeZy3MUAAAAALMLtwqi7aTHvXnvdY6sx5ALYVp5" name="g-recaptcha-response" data-callback="onSubmit">Register</button>
				</form>

				{% if messages %}		
					{% for message in  messages %}
						<div class="alert alert-{{ message.tags }}" id="checkEmailAlert" role="alert">
							{{ message }}
						</div>
					{% endfor %}
				{% endif %}
	    	</div>
	    </div>
	</div>
	
	<script>(function(d, s, id) {
	  var js, fjs = d.getElementsByTagName(s)[0];
	  if (d.getElementById(id)) return;
	  js = d.createElement(s); js.id = id;
	  js.src = 'https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.1';
	  fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));</script>

	<script>
	window.fbAsyncInit = function() {
		FB.init({
		  appId      : '525287897910870',
		  cookie     : true,
		  xfbml      : true,
		  version    : 'v3.1'
		});
		FB.AppEvents.logPageView();
	};

	(function(d, s, id){
		var js, fjs = d.getElementsByTagName(s)[0];
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.id = id;
		js.src = "https://connect.facebook.net/en_US/sdk.js";
		fjs.parentNode.insertBefore(js, fjs);
	}(document, 'script', 'facebook-jssdk'));
	</script>
</div>
{% endblock %}









